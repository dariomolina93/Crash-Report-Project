---
title: "Project 1"
author: "Dario Molina, Everet ..."
date: "March 28, 2018"
output: html_document
---
<!--
Intro: explain what you will do in a sentence or two
Data: Explain in a few sentence where the data comes from, what it is about, etc.
Initial data exploration
Data cleaning and preprocessing
Data exploration and visualization
Conclusions.  One paragraph about what you learned, issues you faced, etc.
-->

###Introduction
In this project, we will look into Car Collision Report data, and analyze in detail what this data represents.  We will make graphs, to visually analyze and find patterns, make predictions, and come to a better understanding on how we can reduce the amount of car collisions.

The data is obtained from dataMontgomery(https://data.montgomerycountymd.gov/Public-Safety/Crash-Reporting-Drivers-Data/mmzv-x632/data), a website that keeps records from the County of Maryland.

```{r global_options, include=FALSE}
knitr::opts_chunk$set(prompt=TRUE, comment="", echo=FALSE)
```


```{r }
dat = read.csv("/Users/dariomolina/DataScience/Crash-Report-Project/Crash_Reporting_-_Drivers_Data.csv",stringsAsFactors=FALSE)

# while getting things working, consider using this smaller file:
# dat = read.csv("https://raw.githubusercontent.com/grbruns/cst383/master/campaign-ca-2016-sample.csv")
```

###Data cleaning and preprocessing

Changing empty blanks to 0 in Off.Road.Description, Related.Non.Motorist, Non.Motorist.Substance.Abuse columns
```{r}
x = c("Off.Road.Description", "Related.Non.Motorist", "Non.Motorist.Substance.Abuse")

#assigning value 0 to "" in x vector
for( i in x)
{
  dat[[i]][dat[[i]] == ""] = 0
}

```

Removing rest of empty blanks and "N/A" in data set to N/A
```{r}
#assignig rest values to NA
for(i in names(dat))
{
  dat[[i]][dat[[i]] == "" | dat[[i]] == "N/A"] = NA
}

```

###Most Common Type of Crashes
```{r}
par(mar=c(3,14,2,2))
x = table(dat$Collision.Type)
barplot(x[x > 5000], horiz=TRUE, las=1, main=" ", col="firebrick")
```

Before we started working with the data, we wanted to analyze from all the crashes what were the most common types of crashes. Based on this graph, we can analyze the data more in detail as forseen in the upcoming graphs.


###Amount of Crashes per Month
```{r}
#amound of crashes per month
x =table(substr(dat$Crash.Date.Time,1,2))
names(x) = c("Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec.")
barplot(x, las = 1, col="firebrick")
```

Since we analyzed the most common types of crash types, we had curiosity to find out during what month of the year do most crashes happen. Why do most crashes happen on a specific month(s), was it due to a season? From the graph we can see January is when most crashes happen, and we came with a theory perhaps is when the new year festivities come into play.

###Most Common Types of Crashes Under Different Types of Weather
```{r}
z = table(dat$Weather,dat$Collision.Type)
y= z[,c("STRAIGHT MOVEMENT ANGLE","SINGLE VEHICLE","SAME DIRECTION RIGHT TURN","SAME DIRECTION LEFT TURN","HEAD ON LEFT TURN","OTHER")]
y = y[c("CLEAR","CLOUDY","RAINING"),]

yCol = c("STRGT-MV-AGL", "ONE-CAR","SM-DIR-R-TR","SM-DIR-L-TR","HD-ON-L-TR","OTHER")
for(i in 1:length(yCol))
{
  colnames(y)[i] = yCol[i]
}
y = y[,c("STRGT-MV-AGL","ONE-CAR","HD-ON-L-TR","OTHER")]
par(mar=c(4,.5,4,.3))
plot(y, main=" ", col="firebrick", las=1)
```

Figuring out which types types of crashes happen most often, and what time of the year they happen the most, we questioned if perhaps weather played a big factor, and if would there be anything surprising when analyzing the data.

###Different Types of Crashes, Most Common Report Type
```{r}
#Whattypes of crash types caused the most reports by category

  #remove coluns from crash type 
y = table(dat$ACRS.Report.Type, dat$Collision.Type)
x= c("STRAIGHT MOVEMENT ANGLE","SINGLE VEHICLE","SAME DIR REAR END","OTHER","HEAD ON LEFT TURN")
y = y[,x]

yCol = c("STRGT-MV-AGL", "ONE-CAR","SM-DIR-R-ED","OTHER","HD-ON-L-TR")
for(i in 1:length(yCol))
{
  colnames(y)[i] = yCol[i]
}
par(mar=c(3,2,3,2))
plot(y, las=1,col="firebrick", main=" ")
```

We were curious to see, what was the output of the crashes. For the most common types of crashes, what were the most common types of reports produced. My partner and I thought fatality was going to have a bigger impact, but to our surprise it had the least impact.

###Most Common Types of Crash Type based on Surface Condition
```{r}
#crashes by surface condition
yCol = c("HD-ON-L-TR","OTHER","SM-DIR-R-ED","SM-DIR-SDWE","ONE-CAR","STRGT-MV-AGL")

x = table(dat$Surface.Condition,dat$Collision.Type)


cols = c("HEAD ON LEFT TURN","OTHER","SAME DIR REAR END","SAME DIRECTION SIDESWIPE","SINGLE VEHICLE","STRAIGHT MOVEMENT ANGLE")
rows = c("DRY","WET","SNOW")
z = x[rows,cols]

for(i in 1:length(yCol))
{
  colnames(z)[i] = yCol[i]
}

par(mar=c(3,.01,3,.01))
plot(z, las=1,col="firebrick", main=" ")
```

We had analyzed most common crash types, when they happen the most, if weather played a big part and what were the most common report times by crash.  We also got curious if surface condition played a factor.  Based on the most crash types, what were the surface condition, and if surface condtion played a role.



